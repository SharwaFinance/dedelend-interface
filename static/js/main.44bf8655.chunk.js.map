{"version":3,"sources":["components/UI/logo/Logo.jsx","components/UI/button/Button.jsx","components/Wallet.jsx","context/context.js","components/utils/wallet.js","components/utils/providers.js","components/utils/contracts.js","components/utils/sepThousands.js","components/utils/math.js","components/utils/stats.js","Header.jsx","Footer.jsx","components/UI/modal/Modal.jsx","components/UI/input/Input.jsx","components/UI/input/NumberInput.jsx","components/Form.jsx","components/UI/loader/Loader.jsx","components/utils/error.js","components/UI/modal/BorrowModal.jsx","components/UI/pagination/Pagination.jsx","hooks/usePages.js","components/utils/pages.js","components/UI/modal/RepayModal.jsx","components/OptionItem.jsx","components/OptionsList.jsx","views/markets/BorrowMarket.jsx","hooks/useFilter.js","components/SupplyCard.jsx","components/WithdrawCard.jsx","views/markets/SupplyMarket.jsx","components/Tabs.jsx","components/MarketInfoBoard.jsx","components/MarketRouter.jsx","components/UI/warning/Warning.jsx","App.js","index.js"],"names":["Logo","className","href","Button","children","disabled","clickHandler","isMain","props","classes","btnActive","childProps","join","toString","Wallet","address","window","outerWidth","substr","onClick","GlobalStatsContext","createContext","UserStatsContext","ARBITRUM","requestAccount","setWalletAddress","ethereum","networkVersion","Number","alert","request","method","params","chainId","ethers","utils","hexlify","location","reload","console","log","code","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","accounts","connectWallet","netProvider","getDefaultProvider","mmProvider","providers","Web3Provider","undefined","signer","getSigner","DDL_ETH","Contract","_DDL_ETH","abi","DDL_ETH_signed","connect","DDL_BTC","_DDL_BTC","DDL_BTC_signed","DDL_POOL","_DDL_POOL","DDL_POOL_signed","OptManager","_OptManager","USDC","_USDC","USDC_signed","PriceProviderETH","_PriceProviderETH","PriceProviderBTC","_PriceProviderBTC","separateThousands","num","symb","str","split","intPart","fractionPart","hasFraction","replace","length","convertInputNum","result","match","removeNonNumeric","sepToNumber","floor","fraction","Math","formatForContract","val","getGlobalStats","globalStats","getTotalBalance","totalBalance","toNumber","totalLocked","totalSupplied","round","formatUnits","availToBorrow","totalBorrowed","utilRate","borrowAPY","getUserStats","walletAddress","balanceOf","balance","shareOf","curBalance","avail","min","userStats","getOptionStats","id","isETH","contract","contract_signed","profitByOption","intrinsicValue","maxBorrowLimit","borrowLimit","borrowedByOption","borrowLimitUsed","currentLiqPrice","liqPrice","realVals","contracts","Header","setGlobalStats","useContext","setUserStats","userAddress","hot","hegicOperationalTreasury","HegicOperationalTreasury","iface","Interface","OptionsManager","strategyMap","Map","HegicStrategyATM_CALL_ETH","HegicStrategyOTM_CALL_110_ETH","HegicStrategyOTM_CALL_120_ETH","HegicStrategyOTM_CALL_130_ETH","HegicStrategyATM_CALL_BTC","HegicStrategyOTM_CALL_110_BTC","HegicStrategyOTM_CALL_120_BTC","HegicStrategyOTM_CALL_130_BTC","HegicStrategyATM_PUT_ETH","HegicStrategyOTM_PUT_70_ETH","HegicStrategyOTM_PUT_80_ETH","HegicStrategyOTM_PUT_90_ETH","HegicStrategyATM_PUT_BTC","HegicStrategyOTM_PUT_70_BTC","HegicStrategyOTM_PUT_80_BTC","HegicStrategyOTM_PUT_90_BTC","transferTopics","encodeFilterTopics","getLogs","transferLogs","arrObj","ids","event","decodeData","decodeEventLog","data","topics","lockedLiquidity","tokenId","lockL","state","includes","expiration","Date","now","strategyInf","get","strategy","push","HegicStrategy","inf","strategyData","name","amount","strike","res","isCALL","PriceProvider","latestRoundData","curPrice","diff","priorLiqPrice","useEffect","then","stats","getOptionByUser","options","e","Footer","target","xmlns","width","height","viewBox","fill","clipPath","rx","d","fillRule","clipRule","Modal","visible","setVisible","resetModal","closeModal","onMouseDown","stopPropagation","Input","msg","setValue","setBtnActive","type","NumberInput","value","onChange","onBlur","Form","maxVal","inputProps","btnText","btnIsActive","onSubmit","modalVisible","useState","class","setState","setVal","action","preventDefault","maxWarningMsg","validateForm","isModal","maxOnClick","btnIsDisabled","Loader","style","stroke","strokeWidth","strokeLinecap","cx","cy","r","errAlert","err","reason","BorrowModal","updateOptionStats","isLoading","setIsLoading","option","initStep","step","setStep","inputVal","setInputVal","setLiqPrice","available","Object","keys","classic","prior","max","steps","title","approve","wait","placeholder","lockOption","borrow","isVisible","map","el","i","Pagination","totalPages","page","changePage","useMemo","pagesArray","pagesArr","getPagesArray","p","usePages","RepayModal","repay","message","unlock","isStep","OptionItem","initBorrowStep","setInitBorrowStep","initRepayStep","setInitRepayStep","repayDisabled","setRepayDisabled","isApprovedOrOwner","ownerOf","owner","key","stat","convertedNum","unit","setBorrowModalState","borrowModalState","setRepayModalState","repayModalState","OptionsList","optionStats","ms","h","dResult","hResult","Fragment","isModalLoading","filter","BorrowMarket","setIsModalLoading","updateModalState","optI","slice","find","opt","setTotalPages","limit","setPage","fetchOptions","filteredOptions","isAuth","setIsAuth","Boolean","fetchedOptions","lowerBound","upperBound","setOptions","totalCount","ceil","getPageCount","setFilter","items","filterItems","item","useFilter","checked","bool","SupplyCard","toFixed","tsc","provideFrom","WithdrawCard","withdraw","SupplyMarket","supplyStep","setSupplyStep","Tabs","links","cls","link","linkCls","isActive","to","MarketInfoBoard","MarketRouter","loc","useLocation","navigate","useNavigate","pathname","allowance","path","element","Warning","App","url","Provider","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.44bf8655.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Logo = () => {\r\n\treturn (\r\n\t\t<div className=\"logo-wrapper\">\r\n\t\t\t<a className='logo' href=\"/index.html\">DeDeLend</a>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Logo;","import React from 'react';\r\n\r\nconst Button = ({children, className, clickHandler, disabled, isMain, ...props}) => {\r\n\tconst classes = ['btn', (isMain ? 'btn_main' : ''), (disabled ? 'disabled' : ''), (props.btnActive ? 'highlighted' : ''), className]\r\n\t\r\n\tconst childProps = { ...props };\r\n\tdelete childProps.btnActive;\r\n\t\r\n\treturn (\r\n\t\t<button {...childProps} disabled={disabled} className={classes.join(' ')} data-text={children}>\r\n\t\t\t{\r\n\t\t\t\tisMain ? \r\n\t\t\t\t\t<span>{children.toString()}</span> :\r\n\t\t\t\t\tchildren\r\n\t\t\t}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;","import React from 'react';\r\n\r\nconst Wallet = ({ address }) => {\r\n\t\r\n\t\r\n\treturn (\r\n\t\t<div className=\"wallet-container\">\r\n\t\t\t<div className=\"wallet\">\r\n\t\t\t\t<div className=\"wallet__avatar-wrapper\">\r\n\t\t\t\t\t<div className=\"wallet__avatar\">\r\n\t\t\t\t\t\t{/* <img src=\"./img/1.jpg\" alt=\"Wallet Avatar\" /> */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"wallet__address\">\r\n\t\t\t\t\t{window.outerWidth < 768 ?\r\n\t\t\t\t\t\taddress.substr(0,5) + '...' + address.substr(-4)\r\n\t\t\t\t\t\t: address}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<button className=\"logout-btn\" onClick={() => {\r\n\t\t\t\t\r\n\t\t\t}}></button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Wallet;","import { createContext } from \"react\";\r\n\r\nexport const GlobalStatsContext = createContext(null)\r\nexport const UserStatsContext = createContext(null)","import { ethers } from 'ethers';\r\n\r\nconst ARBITRUM = 42161;\r\n\r\nexport const requestAccount = async (setWalletAddress) => {\r\n\tif (window.ethereum) {\r\n\t\ttry {\r\n\t\t\tif (window.ethereum.networkVersion && Number(window.ethereum.networkVersion) !== ARBITRUM) {\r\n\t\t\t\talert('Change your network (Arbitrum) and reload the page')\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\tmethod: \"wallet_switchEthereumChain\",\r\n\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM)\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\r\n\t\t\t\t\tif (err.code === 4902) {\r\n\t\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\t\tmethod: \"wallet_addEthereumChain\",\r\n\t\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM),\r\n\t\t\t\t\t\t\t\tchainName: 'Arbitrum One',\r\n\t\t\t\t\t\t\t\tnativeCurrency: {\r\n\t\t\t\t\t\t\t\t\tsymbol: 'ETH',\r\n\t\t\t\t\t\t\t\t\tdecimals: 18\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\trpcUrls: ['https://arb1.arbitrum.io/rpc'],\r\n\t\t\t\t\t\t\t\tblockExplorerUrls: ['https://arbiscan.io/']\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst accounts = await window.ethereum.request({\r\n\t\t\t\tmethod: 'eth_requestAccounts',\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tsetWalletAddress(accounts[0])\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\t\r\n\t} else {\r\n\t\talert('Please, install MetaMask extension to use this application.');\r\n\t}\r\n}\r\n\r\nexport const connectWallet = async (setWalletAddress) => {\r\n\tawait requestAccount(setWalletAddress);\r\n}","import { ethers } from 'ethers';\r\n\r\nexport const netProvider = new ethers.getDefaultProvider('https://arb-mainnet.g.alchemy.com/v2/r6kd0heyoOCe8RFndkyv0XW0F-BG38Fy');\r\n\r\n\r\nexport const mmProvider = window.ethereum ? new ethers.providers.Web3Provider(window.ethereum) : undefined;\r\n\r\nexport const signer = mmProvider?.getSigner()","import { ethers } from 'ethers';\r\nimport _DDL_ETH from '../../deployments/arbitrum_ddl/DDL_ETH.json'\r\nimport _DDL_BTC from '../../deployments/arbitrum_ddl/DDL_BTC.json'\r\nimport _DDL_POOL from '../../deployments/arbitrum_ddl/DDL_POOL.json'\r\nimport _OptManager from \"../../deployments/arbitrum_ddl/OptionsManager.json\";\r\nimport _USDC from \"../../deployments/arbitrum_ddl/USDC.json\";\r\nimport _PriceProviderETH from \"../../deployments/arbitrum_ddl/PriceProviderETH.json\";\r\nimport _PriceProviderBTC from \"../../deployments/arbitrum_ddl/PriceProviderBTC.json\";\r\nimport {netProvider, mmProvider, signer} from './providers.js'\r\n\r\nexport const DDL_ETH = new ethers.Contract(_DDL_ETH.address, _DDL_ETH.abi, mmProvider ?? netProvider);\r\nexport const DDL_ETH_signed = DDL_ETH.connect(signer);\r\n\r\nexport const DDL_BTC = new ethers.Contract(_DDL_BTC.address, _DDL_BTC.abi, mmProvider ?? netProvider);\r\nexport const DDL_BTC_signed = DDL_BTC.connect(signer)\r\n\r\nexport const DDL_POOL = new ethers.Contract(_DDL_POOL.address, _DDL_POOL.abi, mmProvider ?? netProvider);\r\nexport const DDL_POOL_signed = DDL_POOL.connect(signer)\r\n\r\n\r\nexport const OptManager = new ethers.Contract(_OptManager.address, _OptManager.abi, signer)\r\n\r\nexport const USDC = new ethers.Contract(_USDC.address, _USDC.abi, mmProvider ?? netProvider)\r\nexport const USDC_signed = USDC.connect(signer)\r\n\r\n\r\nexport const PriceProviderETH = new ethers.Contract(_PriceProviderETH.address, _PriceProviderETH.abi, mmProvider ?? netProvider)\r\n\r\nexport const PriceProviderBTC = new ethers.Contract(_PriceProviderBTC.address, _PriceProviderBTC.abi, mmProvider ?? netProvider)","export const separateThousands = (num, symb = \",\") => {\r\n\tif (typeof num === 'undefined') {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tconst str = num.toString();\r\n\tlet [intPart, fractionPart] = str.split('.')\r\n\tconst hasFraction = fractionPart !== undefined;\r\n\r\n\tintPart = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, hasFraction ? ',' : symb)\r\n\t\r\n\tif (hasFraction) {\r\n\t\tif (fractionPart.length === 1 && symb !== ' ') {\r\n\t\t\tfractionPart += '0'\r\n\t\t}\r\n\t\t\r\n\t\treturn intPart + '.' + fractionPart\r\n\t} else {\r\n\t\treturn intPart;\r\n\t}\r\n}\r\n\r\n\r\nconst removeNonNumeric = (num) => {\r\n\tlet result = num.toString().replace(/^\\./g, '').replace(/[^0-9.]/g, '').replace(/^0\\d/, '')\r\n\r\n\tif (result.match(/\\./g)?.length > 1) {\r\n\t\tresult = result.replace(/\\.$/, '')\r\n\t}\r\n\r\n\tlet [, fractionPart] = result.split('.')\r\n\r\n\tif (fractionPart?.length > 6) {\r\n\t\tresult = result.substr(0, result.length - 1)\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\nexport const convertInputNum = (num) => {\r\n\treturn separateThousands(removeNonNumeric(num), ' ')\r\n}\r\n\r\n\r\nexport const sepToNumber = (str, symb = ' ') => {\r\n\tif (typeof str !== 'string') {\r\n\t\treturn str;\r\n\t}\r\n\t\r\n\treturn Number(str.split(symb).join(''))\r\n}","import { sepToNumber } from \"./sepThousands\";\r\n\r\nexport const floor = (num, fraction = 2) => {\r\n\treturn Math.floor(num * 10**fraction) / 10**fraction;\r\n}\r\n\r\n\r\nexport const formatForContract = (val, fraction = 6) => {\r\n\treturn Math.floor(sepToNumber(val) * 10**fraction);\r\n}","import { ethers } from \"ethers\"\r\nimport { DDL_ETH, DDL_ETH_signed, USDC, DDL_POOL, DDL_BTC, DDL_BTC_signed } from './contracts';\r\nimport { floor } from './math';\r\n\r\n\r\nexport const getGlobalStats = async () => {\r\n\tconst globalStats = {}\r\n\t\r\n\tconst totalBalance = (await DDL_POOL.getTotalBalance()).toNumber()\r\n\t\r\n\tconst totalLocked = (await DDL_POOL.totalLocked()).toNumber()\r\n\tconst totalSupplied = totalBalance + totalLocked;\r\n\tglobalStats.totalSupplied = Math.round(ethers.utils.formatUnits(totalSupplied, 6));\r\n\tglobalStats.availToBorrow = Math.round(ethers.utils.formatUnits(totalBalance, 6));\r\n\tglobalStats.totalBorrowed = Math.round(ethers.utils.formatUnits(totalLocked, 6));\r\n\r\n\tconsole.log(totalBalance);\r\n\t\r\n\tglobalStats.utilRate = floor(totalSupplied === 0 ? \r\n\t\t0 : (totalLocked / totalSupplied * 100))\r\n\tglobalStats.borrowAPY = 10;\r\n\t\r\n\t\r\n\treturn globalStats;\r\n}\r\n\r\nexport const getUserStats = async (walletAddress) => {\r\n\ttry {\r\n\t\tconst balance = Number(ethers.utils.formatUnits(await USDC.balanceOf(walletAddress), 6))\r\n\t\tconst curBalance = Number(ethers.utils.formatUnits(await DDL_POOL.shareOf(walletAddress), 6))\r\n\t\r\n\t\tconst totalBalance = (await DDL_POOL.getTotalBalance()).toNumber()\r\n\t\tconst avail = Math.min(curBalance, totalBalance)\r\n\t\r\n\t\tconst userStats = {\r\n\t\t\tbalance: floor(balance),\r\n\t\t\tcurBalance: floor(curBalance),\r\n\t\t\tavail: floor(avail),\r\n\t\t}\r\n\t\r\n\t\treturn userStats;\r\n\t} catch(err) {\r\n\t\tconsole.log(err);\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nexport const getOptionStats = async (id, isETH) => {\r\n\tconsole.log('getting option stats', id);\r\n\r\n\tconst contract = isETH ? DDL_ETH : DDL_BTC;\r\n\tconst contract_signed = isETH ? DDL_ETH_signed : DDL_BTC_signed;\r\n\t\r\n\tconst intrinsicValue = Number(ethers.utils.formatUnits(await contract.profitByOption(id), 6))\r\n\tconst borrowLimit = Number(ethers.utils.formatUnits(await contract.maxBorrowLimit(id), 6))\r\n\tconst borrowLimitUsed = Number(ethers.utils.formatUnits((await contract.borrowedByOption(id))[0], 6))\r\n\tconst liqPrice = Number(borrowLimitUsed) === 0 ? '' : Number(ethers.utils.formatUnits(await contract.currentLiqPrice(id), 8))\r\n\r\n\treturn {\r\n\t\tintrinsicValue: floor(intrinsicValue),\r\n\t\tborrowLimit: floor(borrowLimit),\r\n\t\tborrowLimitUsed: floor(borrowLimitUsed),\r\n\t\tliqPrice: (typeof liqPrice === 'string') ? liqPrice : floor(liqPrice),\r\n\t\trealVals: {\r\n\t\t\tintrinsicValue,\r\n\t\t\tborrowLimit,\r\n\t\t\tborrowLimitUsed,\r\n\t\t\tliqPrice,\r\n\t\t},\r\n\t\tcontracts: [contract, contract_signed]\r\n\t}\r\n}\r\n","import React, { useContext, useEffect } from 'react';\r\nimport Logo from './components/UI/logo/Logo'\r\nimport Button from './components/UI/button/Button';\r\nimport Wallet from './components/Wallet';\r\nimport { GlobalStatsContext, UserStatsContext } from './context/context';\r\nimport { ethers } from 'ethers';\r\nimport { connectWallet } from './components/utils/wallet';\r\nimport HegicStrategyATM_CALL_ETH from \"./deployments/arbitrum_ddl/HegicStrategyATM_CALL_ETH.json\";\r\nimport HegicStrategyOTM_CALL_110_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_110_ETH.json\";\r\nimport HegicStrategyOTM_CALL_120_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_120_ETH.json\";\r\nimport HegicStrategyOTM_CALL_130_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_130_ETH.json\";\r\nimport HegicStrategyATM_CALL_BTC from \"./deployments/arbitrum_ddl/HegicStrategyATM_CALL_BTC.json\";\r\nimport HegicStrategyOTM_CALL_110_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_110_BTC.json\";\r\nimport HegicStrategyOTM_CALL_120_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_120_BTC.json\";\r\nimport HegicStrategyOTM_CALL_130_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_CALL_130_BTC.json\";\r\nimport HegicStrategyATM_PUT_ETH from \"./deployments/arbitrum_ddl/HegicStrategyATM_PUT_ETH.json\";\r\nimport HegicStrategyOTM_PUT_70_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_70_ETH.json\";\r\nimport HegicStrategyOTM_PUT_80_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_80_ETH.json\";\r\nimport HegicStrategyOTM_PUT_90_ETH from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_90_ETH.json\";\r\nimport HegicStrategyATM_PUT_BTC from \"./deployments/arbitrum_ddl/HegicStrategyATM_PUT_BTC.json\";\r\nimport HegicStrategyOTM_PUT_70_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_70_BTC.json\";\r\nimport HegicStrategyOTM_PUT_80_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_80_BTC.json\";\r\nimport HegicStrategyOTM_PUT_90_BTC from \"./deployments/arbitrum_ddl/HegicStrategyOTM_PUT_90_BTC.json\";\r\nimport OptionsManager from \"./deployments/arbitrum_ddl/OptionsManager.json\";\r\nimport HegicOperationalTreasury from \"./deployments/arbitrum_ddl/HegicOperationalTreasury.json\";\r\nimport {mmProvider} from './components/utils/providers.js'\r\nimport { OptManager, PriceProviderETH, PriceProviderBTC } from './components/utils/contracts';\r\nimport { getGlobalStats, getUserStats, getOptionStats } from './components/utils/stats';\r\n\r\n\r\nconst Header = ({ walletAddress, setWalletAddress }) => {\r\n\t\r\n\tconst { setGlobalStats } = useContext(GlobalStatsContext)\r\n\tconst { setUserStats } = useContext(UserStatsContext)\r\n\t\r\n\tasync function getOptionByUser(userAddress) {\r\n\t\tlet hot = OptManager;\r\n\r\n\t\tlet hegicOperationalTreasury = new ethers.Contract(HegicOperationalTreasury.address, HegicOperationalTreasury.abi, mmProvider)\r\n\t\tconst iface = new ethers.utils.Interface(OptionsManager.abi)\r\n\t\r\n\t\tconst strategyMap = new Map([\r\n\t\t\t[HegicStrategyATM_CALL_ETH.address, { \"name\": \"ETH-ATM-CALL\", \"inf\": HegicStrategyATM_CALL_ETH }],\r\n\t\t\t[HegicStrategyOTM_CALL_110_ETH.address, { \"name\": \"ETH-OTM-CALL-10%\", \"inf\": HegicStrategyOTM_CALL_110_ETH }],\r\n\t\t\t[HegicStrategyOTM_CALL_120_ETH.address, { \"name\": \"ETH-OTM-CALL-20%\", \"inf\": HegicStrategyOTM_CALL_120_ETH }],\r\n\t\t\t[HegicStrategyOTM_CALL_130_ETH.address, { \"name\": \"ETH-OTM-CALL-30%\", \"inf\": HegicStrategyOTM_CALL_130_ETH }],\r\n\t\t\t[HegicStrategyATM_CALL_BTC.address, { \"name\": \"BTC-ATM-CALL\", \"inf\": HegicStrategyATM_CALL_BTC }],\r\n\t\t\t[HegicStrategyOTM_CALL_110_BTC.address, { \"name\": \"BTC-OTM-CALL-10%\", \"inf\": HegicStrategyOTM_CALL_110_BTC }],\r\n\t\t\t[HegicStrategyOTM_CALL_120_BTC.address, { \"name\": \"BTC-OTM-CALL-20%\", \"inf\": HegicStrategyOTM_CALL_120_BTC }],\r\n\t\t\t[HegicStrategyOTM_CALL_130_BTC.address, { \"name\": \"BTC-OTM-CALL-30%\", \"inf\": HegicStrategyOTM_CALL_130_BTC }],\r\n\t\t\t[HegicStrategyATM_PUT_ETH.address, { \"name\": \"ETH-ATM-PUT\", \"inf\": HegicStrategyATM_PUT_ETH }],\r\n\t\t\t[HegicStrategyOTM_PUT_70_ETH.address, { \"name\": \"ETH-OTM-PUT-30%\", \"inf\": HegicStrategyOTM_PUT_70_ETH }],\r\n\t\t\t[HegicStrategyOTM_PUT_80_ETH.address, { \"name\": \"ETH-OTM-PUT-20%\", \"inf\": HegicStrategyOTM_PUT_80_ETH }],\r\n\t\t\t[HegicStrategyOTM_PUT_90_ETH.address, { \"name\": \"ETH-OTM-PUT-10%\", \"inf\": HegicStrategyOTM_PUT_90_ETH }],\r\n\t\t\t[HegicStrategyATM_PUT_BTC.address, { \"name\": \"BTC-ATM-PUT\", \"inf\": HegicStrategyATM_PUT_BTC }],\r\n\t\t\t[HegicStrategyOTM_PUT_70_BTC.address, { \"name\": \"BTC-OTM-PUT-30%\", \"inf\": HegicStrategyOTM_PUT_70_BTC }],\r\n\t\t\t[HegicStrategyOTM_PUT_80_BTC.address, { \"name\": \"BTC-OTM-PUT-20%\", \"inf\": HegicStrategyOTM_PUT_80_BTC }],\r\n\t\t\t[HegicStrategyOTM_PUT_90_BTC.address, { \"name\": \"BTC-OTM-PUT-10%\", \"inf\": HegicStrategyOTM_PUT_90_BTC }],\r\n\t\t])\r\n\t\r\n\t\tlet transferTopics = iface.encodeFilterTopics(\"Transfer\", [\r\n\t\t\tnull,\r\n\t\t\tuserAddress\r\n\t\t\t])\r\n\t\tlet transferLogs = await mmProvider.getLogs({\r\n\t\t\t\"address\":hot.address,\r\n\t\t\t\"fromBlock\": 6661745 , \r\n\t\t\t\"topics\": transferTopics\r\n\t\t})\r\n\t\r\n\t\tlet arrObj = []\r\n\t\tlet ids = []\r\n\t\t\r\n\t\tfor (let event of transferLogs) {\r\n\t\t\t\r\n\t\t\tlet decodeData = iface.decodeEventLog(\"Transfer\", event.data, event.topics)\r\n\r\n\t\t\t\r\n\t\t\tlet lockL = await hegicOperationalTreasury.lockedLiquidity(decodeData.tokenId)\r\n\t\t\t\r\n\t\t\tif (Number(lockL.state) !== 0) {\r\n\t\t\t\tconst id = decodeData.tokenId.toNumber()\r\n\t\t\t\tif (ids.includes(id)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet expiration = lockL.expiration * 1000 - Date.now();\r\n\t\t\t\tif (expiration <= 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet strategyInf = strategyMap.get(lockL.strategy);\r\n\t\t\t\tif (!strategyInf) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tids.push(id)\r\n\t\t\t\t\r\n\t\t\t\tconst HegicStrategy = new ethers.Contract(lockL.strategy, strategyInf.inf.abi, mmProvider)\r\n\t\t\t\t\r\n\t\t\t\tlet strategyData = await HegicStrategy.strategyData(id)\r\n\t\t\t\tlet isETH = strategyInf.name?.includes(\"ETH\")\r\n\t\t\t\tlet amount = Number(ethers.utils.formatUnits(strategyData.amount.toString(),isETH ? 18 :8))\r\n\t\t\t\tlet strike = Number(ethers.utils.formatUnits(strategyData.strike.toString(),8))\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tconst res = await getOptionStats(id, isETH)\r\n\t\t\t\t\r\n\t\t\t\tconst isCALL = strategyInf.name?.includes(\"CALL\");\r\n\t\t\t\tconst PriceProvider = isETH ? PriceProviderETH : PriceProviderBTC\r\n\t\t\t\tconst curPrice = Number(ethers.utils.formatUnits(\r\n\t\t\t\t\t(await PriceProvider.latestRoundData())[1], 8\r\n\t\t\t\t))\r\n\t\t\t\t\r\n\t\t\t\tconst diff = isETH ? 0.04 : 0.03;\r\n\t\t\t\tlet priorLiqPrice;\r\n\t\t\t\tif (isCALL) {\r\n\t\t\t\t\tpriorLiqPrice = strike * (1 + diff);\r\n\r\n\t\t\t\t\tif (curPrice <= priorLiqPrice) {\r\n\t\t\t\t\t\tres.borrowLimit = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpriorLiqPrice = strike * (1 - diff)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (curPrice >= priorLiqPrice) {\r\n\t\t\t\t\t\tres.borrowLimit = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tarrObj.push({\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tname: strategyInf.name,\r\n\t\t\t\t\tamount: Math.floor(amount * 100)/100,\r\n\t\t\t\t\tstrike: Math.floor(strike * 100)/100,\r\n\t\t\t\t\texpiration,\r\n\t\t\t\t\t// strategy: lockL.strategy,\r\n\t\t\t\t\tintrinsicValue: res.intrinsicValue,\r\n\t\t\t\t\tborrowLimit: res.borrowLimit,\r\n\t\t\t\t\tborrowLimitUsed: res.borrowLimitUsed,\r\n\t\t\t\t\tliqPrice: res.liqPrice ?? '',\r\n\t\t\t\t\trealVals: res.realVals ?? {},\r\n\t\t\t\t\tcontracts: res.contracts,\r\n\t\t\t\t\tisETH,\r\n\t\t\t\t\tpriorLiqPrice\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif (!arrObj.length) {\r\n\t\t\tarrObj.push('You dont have active Hegic Options')\r\n\t\t}\r\n\t\treturn arrObj;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconnectWallet(setWalletAddress)\r\n\r\n\t\tgetGlobalStats()\r\n\t\t\t.then(stats => {\r\n\t\t\t\tsetGlobalStats(stats)\r\n\t\t\t})\r\n\t}, [window.ethereum?.networkVersion])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (walletAddress) {\r\n\t\t\tgetUserStats(walletAddress)\r\n\t\t\t\t.then(stats => {\r\n\t\t\t\t\tsetUserStats(stats)\r\n\r\n\t\t\t\t\tgetOptionByUser(walletAddress)\r\n\t\t\t\t\t\t.then(options => {\r\n\t\t\t\t\t\t\tsetUserStats({\r\n\t\t\t\t\t\t\t\t...stats,\r\n\t\t\t\t\t\t\t\toptions\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [walletAddress])\r\n\t\r\n\treturn (\r\n\t\t<header className='header'>\r\n\t\t\t<div className=\"header__content _container\">\r\n\t\t\t\t<Logo></Logo>\r\n\r\n\t\t\t\t{walletAddress ?\r\n\t\t\t\t\t<Wallet address={walletAddress} /> :\r\n\t\t\t\t\t<Button isMain={true} onClick={(e) => {\r\n\t\t\t\t\t\tconnectWallet(setWalletAddress)\r\n\t\t\t\t\t}}>Connect wallet</Button>}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport Logo from './components/UI/logo/Logo';\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<div className=\"footer__content _container\">\r\n\t\t\t\t<Logo></Logo>\r\n\t\t\t\t<div className=\"footer__smedia-items\">\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" href=\"https://mirror.xyz/dedelend.eth/gJriRVVlVGqU3l4qKIP6v08z5KUrdHDpGki6j4jLhss\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clipPath=\"url(#clip0_58_113)\">\r\n\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t\t<path d=\"M9 14C9 10.6863 11.6863 8 15 8C18.3137 8 21 10.6863 21 14V21.3929C21 22.2805 20.2805 23 19.3929 23H10.6071C9.71954 23 9 22.2805 9 21.3929V14Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t<clipPath id=\"clip0_58_113\">\r\n\t\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" href=\"https://github.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M15.5 8C11.3562 8 8 11.4411 8 15.6897C8 19.0924 10.1469 21.9664 13.1281 22.9853C13.5031 23.0526 13.6437 22.8219 13.6437 22.62C13.6437 22.4374 13.6344 21.8319 13.6344 21.1878C11.75 21.5435 11.2625 20.7168 11.1125 20.2843C11.0281 20.0632 10.6625 19.3808 10.3438 19.1981C10.0812 19.0539 9.70625 18.6983 10.3344 18.6887C10.925 18.6791 11.3469 19.2462 11.4875 19.4769C12.1625 20.64 13.2406 20.3131 13.6719 20.1113C13.7375 19.6115 13.9344 19.275 14.15 19.0828C12.4812 18.8905 10.7375 18.2273 10.7375 15.286C10.7375 14.4497 11.0281 13.7577 11.5063 13.2194C11.4313 13.0271 11.1688 12.2389 11.5812 11.1816C11.5812 11.1816 12.2094 10.9798 13.6437 11.9698C14.2437 11.7968 14.8812 11.7103 15.5187 11.7103C16.1562 11.7103 16.7937 11.7968 17.3938 11.9698C18.8281 10.9701 19.4563 11.1816 19.4563 11.1816C19.8687 12.2389 19.6063 13.0271 19.5312 13.2194C20.0094 13.7577 20.3 14.4401 20.3 15.286C20.3 18.2369 18.5469 18.8905 16.8781 19.0828C17.15 19.3231 17.3844 19.7845 17.3844 20.5054C17.3844 21.5339 17.375 22.3605 17.375 22.62C17.375 22.8219 17.5156 23.0622 17.8906 22.9853C19.3795 22.4699 20.6732 21.4888 21.5898 20.1801C22.5063 18.8714 22.9996 17.3009 23 15.6897C23 11.4411 19.6438 8 15.5 8Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" href=\"https://twitter.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M23 10.4234C22.4484 10.664 21.8558 10.8265 21.2328 10.8999C21.8756 10.5215 22.3565 9.92574 22.5858 9.22397C21.9819 9.57697 21.3209 9.82545 20.6317 9.95859C20.1682 9.47158 19.5543 9.14877 18.8852 9.0403C18.2162 8.93183 17.5295 9.04376 16.9317 9.35871C16.334 9.67366 15.8586 10.174 15.5794 10.7821C15.3002 11.3902 15.2328 12.0719 15.3877 12.7215C14.164 12.6611 12.9669 12.3481 11.8741 11.8029C10.7813 11.2577 9.81726 10.4924 9.04444 9.55683C8.78019 10.0054 8.62825 10.5255 8.62825 11.0794C8.62795 11.578 8.75273 12.069 8.99151 12.5088C9.23029 12.9486 9.57568 13.3236 9.99705 13.6005C9.50837 13.5852 9.03048 13.4552 8.60314 13.2215V13.2605C8.6031 13.9598 8.84892 14.6377 9.2989 15.1789C9.74888 15.7202 10.3753 16.0916 11.0719 16.2302C10.6185 16.3509 10.1433 16.3687 9.68193 16.2822C9.87847 16.8839 10.2613 17.4101 10.7768 17.7871C11.2923 18.1641 11.9148 18.373 12.5569 18.3846C11.4668 19.2268 10.1205 19.6836 8.73461 19.6816C8.48911 19.6816 8.24382 19.6675 8 19.6393C9.40677 20.5294 11.0444 21.0018 12.7168 21C18.3783 21 21.4733 16.3855 21.4733 12.3835C21.4733 12.2535 21.47 12.1221 21.4641 11.9921C22.0661 11.5637 22.5857 11.0332 22.9987 10.4254L23 10.4234Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" href=\"https://discord.gg/5DGZ7rzSfS\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M20.6981 10.9123C19.7418 10.4907 18.7169 10.179 17.645 10.0018C17.6355 10 17.6256 10.0012 17.6167 10.0051C17.6079 10.009 17.6005 10.0156 17.5956 10.0238C17.4644 10.2493 17.3182 10.5432 17.2157 10.7754C16.0789 10.6094 14.9232 10.6094 13.7864 10.7754C13.6722 10.5181 13.5435 10.2671 13.4008 10.0238C13.3959 10.0155 13.3886 10.0088 13.3798 10.0047C13.371 10.0005 13.3611 9.99908 13.3514 10.0006C12.2802 10.1778 11.2552 10.4894 10.2984 10.9117C10.2901 10.9151 10.2831 10.9208 10.2784 10.9282C8.33342 13.7238 7.80031 16.4504 8.06217 19.1428C8.0629 19.1494 8.065 19.1558 8.06833 19.1616C8.07166 19.1673 8.07616 19.1724 8.08155 19.1764C9.21676 19.9845 10.4829 20.6001 11.8271 20.9974C11.8364 21.0002 11.8465 21.0002 11.8558 20.9974C11.8652 20.9946 11.8735 20.989 11.8796 20.9815C12.1688 20.6033 12.4251 20.2021 12.6458 19.782C12.6489 19.7762 12.6506 19.7699 12.651 19.7635C12.6513 19.757 12.6502 19.7505 12.6478 19.7445C12.6454 19.7385 12.6417 19.733 12.6369 19.7285C12.6321 19.724 12.6264 19.7206 12.6202 19.7184C12.2164 19.5698 11.8252 19.3904 11.4502 19.1819C11.4435 19.1782 11.4378 19.1728 11.4337 19.1664C11.4296 19.16 11.4272 19.1526 11.4267 19.145C11.4262 19.1375 11.4276 19.1299 11.4308 19.123C11.4341 19.1161 11.439 19.1101 11.4452 19.1055C11.5239 19.0487 11.6027 18.9894 11.6777 18.9302C11.6844 18.9248 11.6926 18.9214 11.7012 18.9204C11.7098 18.9193 11.7185 18.9206 11.7264 18.9241C14.1807 20.002 16.8388 20.002 19.2643 18.9241C19.2723 18.9204 19.2811 18.9189 19.2898 18.9199C19.2986 18.9208 19.3068 18.9242 19.3137 18.9295C19.3887 18.9894 19.4668 19.0487 19.5462 19.1055C19.5525 19.11 19.5575 19.1159 19.5608 19.1228C19.5642 19.1296 19.5657 19.1371 19.5653 19.1447C19.565 19.1523 19.5627 19.1596 19.5587 19.1661C19.5547 19.1726 19.5491 19.1781 19.5425 19.1819C19.1687 19.3921 18.78 19.57 18.3719 19.7178C18.3656 19.7201 18.3599 19.7236 18.3551 19.7281C18.3504 19.7327 18.3466 19.7382 18.3442 19.7442C18.3418 19.7503 18.3407 19.7568 18.3411 19.7633C18.3414 19.7698 18.3432 19.7762 18.3463 19.782C18.5712 20.2018 18.8287 20.6014 19.1119 20.9809C19.1177 20.9887 19.1259 20.9945 19.1353 20.9976C19.1447 21.0006 19.1549 21.0008 19.1644 20.998C20.5108 20.6018 21.779 19.986 22.9155 19.1764C22.921 19.1726 22.9257 19.1677 22.9291 19.162C22.9326 19.1563 22.9348 19.15 22.9355 19.1434C23.248 16.0306 22.4118 13.326 20.7174 10.9294C20.7133 10.9216 20.7064 10.9155 20.6981 10.9123ZM13.0127 17.5033C12.2739 17.5033 11.6646 16.8501 11.6646 16.049C11.6646 15.2472 12.2621 14.5946 13.0127 14.5946C13.7689 14.5946 14.3726 15.2527 14.3607 16.049C14.3607 16.8507 13.7633 17.5033 13.0127 17.5033ZM17.9969 17.5033C17.2575 17.5033 16.6488 16.8501 16.6488 16.049C16.6488 15.2472 17.2457 14.5946 17.9969 14.5946C18.7531 14.5946 19.3568 15.2527 19.345 16.049C19.345 16.8507 18.7537 17.5033 17.9969 17.5033Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" href=\"https://t.me/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M21.9875 9.0789L8.70041 13.9664C7.79362 14.3138 7.79886 14.7964 8.53404 15.0115L11.9454 16.0267L19.8382 11.2764C20.2114 11.0598 20.5524 11.1763 20.2721 11.4136L13.8774 16.9188H13.8759L13.8774 16.9195L13.642 20.2737C13.9868 20.2737 14.1389 20.1228 14.3323 19.9448L15.9892 18.4079L19.4358 20.8363C20.0713 21.1701 20.5277 20.9985 20.6858 20.2751L22.9483 10.104C23.1798 9.2183 22.5938 8.81726 21.9875 9.0789Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t);\r\n};\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nconst Modal = ({children, className, visible, setVisible, resetModal}) => {\r\n\tconst classes = ['modal', className]\r\n\r\n\t\r\n\tif (visible) {\r\n\t\tclasses.push('active')\r\n\t}\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetVisible(false)\r\n\t\tresetModal()\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.join(' ')} onMouseDown={closeModal}>\r\n\t\t\t<div className=\"modal__content-wrapper\">\r\n\t\t\t\t<div className=\"modal__content\" onMouseDown={e => e.stopPropagation()}>\r\n\t\t\t\t\t<button className=\"close-btn\" onClick={closeModal}></button>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Modal;","import React from 'react';\r\n\r\nconst Input = ({msg, ...props}) => {\r\n\tconst childProps = { ...props };\r\n\tdelete childProps.setValue;\r\n\tdelete childProps.setBtnActive;\r\n\t\r\n\treturn (\r\n\t\t<div className='input-container'>\r\n\t\t\t<input type=\"text\" {...childProps} />\r\n\t\t\t<span className=\"msg\">{msg}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Input;","import React, { useState, } from 'react';\r\nimport Input from './Input';\r\nimport { convertInputNum } from '../../utils/sepThousands';\r\n\r\n\r\nconst NumberInput = (props) => {\r\n\t\r\n\treturn (\r\n\t\t<Input\r\n\t\t\t{...props}\r\n\t\t\tvalue={props.value}\r\n\r\n\t\t\tonChange={e => {\r\n\t\t\t\tprops.setBtnActive(true)\r\n\t\t\t\tprops.setValue(convertInputNum(e.target.value))\r\n\t\t\t}}\r\n\t\t\t\r\n\t\t\tonBlur={() => {\r\n\t\t\t\tif(!props.value) {\r\n\t\t\t\t\tprops.setBtnActive(false)\r\n\t\t\t\t}\r\n\t\t\t}} />\r\n\t);\r\n};\r\n\r\nexport default NumberInput;","import React, { useState, useEffect } from 'react';\r\nimport NumberInput from './UI/input/NumberInput'\r\nimport Button from './UI/button/Button'\r\n\r\nconst Form = ({children, maxVal, inputProps, btnText, btnIsActive, onSubmit, modalVisible, ...props}) => {\r\n\r\n\tconst [state, setState] = useState({class: '', msg: ''});\r\n\t\r\n\tlet [val, setVal] = useState('')\r\n\tif (inputProps.state) {\r\n\t\tval = inputProps.state.val\r\n\t\tsetVal = inputProps.state.setVal\r\n\t}\r\n\r\n\tconst [btnActive, setBtnActive] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!modalVisible) {\r\n\t\t\tsetState({\r\n\t\t\t\tclass: '',\r\n\t\t\t\tmsg: ''\r\n\t\t\t});\r\n\t\t\tsetVal('')\r\n\t\t}\r\n\t}, [modalVisible])\r\n\t\r\n\treturn (\r\n\t\t<form className={props.className} action=\"post\" onSubmit={((e) => {\r\n\t\t\te.preventDefault()\r\n\t\t\t\r\n\t\t\tconst validateForm = () => {\r\n\t\t\t\tif (!val) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\r\n\t\t\t\t\tsetState({\r\n\t\t\t\t\t\tclass: 'error',\r\n\t\t\t\t\t\tmsg: 'Empty field'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(Number(val.toString().split('.').join('')) === 0) {\r\n\t\t\t\t\t\te.preventDefault()\r\n\r\n\t\t\t\t\t\tsetState({\r\n\t\t\t\t\t\t\tclass: 'error',\r\n\t\t\t\t\t\t\tmsg: ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if(val.toString().split(' ').join('') > maxVal) {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetState({\r\n\t\t\t\t\t\t\tclass: 'error',\r\n\t\t\t\t\t\t\tmsg: props.maxWarningMsg ?? 'Insufficient balance'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetState({\r\n\t\t\t\t\t\t\tclass: '',\r\n\t\t\t\t\t\t\tmsg: ''\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tonSubmit(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (inputProps.disabled) {\r\n\t\t\t\tonSubmit(e)\r\n\t\t\t} else {\r\n\t\t\t\tvalidateForm()\r\n\t\t\t}\r\n\t\t})}>\r\n\t\t\t<div className='form-field'>\r\n\t\t\t\t<div className=\"input-container\">\r\n\t\t\t\t\t<NumberInput value={val} setValue={setVal} {...inputProps} className={state.class} msg={state.msg} setBtnActive={setBtnActive}></NumberInput>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.isModal ?\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn_plain\"\r\n\t\t\t\t\t\t\tdisabled={inputProps.disabled}\r\n\t\t\t\t\t\t\tonClick={props.maxOnClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMax\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button btnActive={btnActive || btnIsActive} disabled={props.btnIsDisabled}>{btnText}</Button>\r\n\t\t\t</div>\r\n\t\t\t{children}\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Form;","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<div className='loader-container'>\r\n\t\t\t<svg viewBox=\"0 0 100 100\">\r\n\t\t\t\t<defs>\r\n\t\t\t\t</defs>\r\n\t\t\t\t<circle className=\"loader\" style={{fill:'transparent',stroke:'#fff',strokeWidth: '7px',strokeLinecap: 'round'}} cx=\"50\" cy=\"50\" r=\"45\"/>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","export const errAlert = (err) => {\r\n\tconsole.log(err);\r\n\talert(`Error code: ${err.code}\\nError message: ${err.reason}\\n\\nCheck the console for details.`)\r\n}","import React, {useContext, useState, useEffect} from 'react';\r\nimport Modal from './Modal';\r\nimport { GlobalStatsContext } from './../../../context/context';\r\nimport Form from './../../Form';\r\nimport { OptManager } from './../../utils/contracts';\r\nimport Loader from './../loader/Loader';\r\nimport { floor, formatForContract } from './../../utils/math';\r\nimport { sepToNumber, separateThousands } from './../../utils/sepThousands';\r\nimport { errAlert } from './../../utils/error';\r\n\r\nconst BorrowModal = ({state, setVisible, updateOptionStats, isLoading, setIsLoading}) => {\r\n\tconst option = state.option;\r\n\tconst contract = option.contracts?.[0]\r\n\tconst contract_signed = option.contracts?.[1]\r\n\t\r\n\tconst {globalStats} = useContext(GlobalStatsContext)\r\n\tconst [step, setStep] = useState(state.initStep ?? 0);\r\n\tconst [inputVal, setInputVal] = useState('')\r\n\tconst [liqPrice, setLiqPrice] = useState('')\r\n\r\n\tconst available = floor(option.realVals?.borrowLimit - option.realVals?.borrowLimitUsed, 6);\r\n\r\n\tconst setMaxVal = () => {\r\n\t\tsetInputVal(available)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (typeof option !== 'object' || !Object.keys(option).length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (sepToNumber(inputVal) > available) {\r\n\t\t\tsetInputVal(available)\r\n\t\t}\r\n\t\t\r\n\t\tlet classic, result;\r\n\t\tconst prior = option.priorLiqPrice;\r\n\t\tconst val = sepToNumber(inputVal)\r\n\r\n\t\tconst isCALL = option.name.includes('CALL')\r\n\r\n\t\tif (isCALL) {\r\n\t\t\tclassic = option.strike + (((option.borrowLimitUsed + val) / option.amount) * 1.2)\r\n\t\t\t\r\n\t\t\tresult = Math.max(prior, classic);\r\n\t\t} else {\r\n\t\t\tclassic = option.strike - (((option.borrowLimitUsed + val) / option.amount) * 1.2)\r\n\r\n\t\t\tresult = Math.min(prior, classic);\r\n\t\t}\r\n\t\t\r\n\t\tsetLiqPrice(floor(result))\r\n\r\n\t}, [inputVal])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetStep(state.initStep ?? 0)\r\n\t}, [state.initStep])\r\n\t\r\n\r\n\tconst steps = [\r\n\t\t{\r\n\t\t\ttitle: \"Approve\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsetIsLoading(true);\r\n\t\t\t\t\r\n\t\t\t\tOptManager.approve(contract.address, option.id)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('Approve transaction:', res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsetStep(step + 1);\r\n\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: true,\r\n\t\t\t},\r\n\t\t\tbtnIsActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Lock Collateral\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsetIsLoading(true);\r\n\t\t\t\t\r\n\t\t\t\tcontract_signed.lockOption(option.id)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('Lock Collateral transaction:', res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsetStep(step + 1);\r\n\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: true,\r\n\t\t\t},\r\n\t\t\tbtnIsActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Borrow\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tsetIsLoading(true);\r\n\r\n\t\t\t\tcontract_signed.borrow(option.id, formatForContract(inputVal))\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('Borrow transaction:', res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsetInputVal('')\r\n\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: false,\r\n\t\t\t\tstate: {\r\n\t\t\t\t\tval: inputVal,\r\n\t\t\t\t\tsetVal: setInputVal\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\r\n\tconst resetModal = () => {\r\n\t\tsetStep(state.initStep ?? 0)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Modal className={'modal_borrow'} visible={state.isVisible} setVisible={setVisible} resetModal={resetModal}>\r\n\t\t\t<h1 className='modal__title'>Borrow USDC</h1>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t<div className=\"modal__steps steps\">\r\n\t\t\t\t\t{steps.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className={i === step ? 'modal__step step current' : 'modal__step step'} key={i}>\r\n\t\t\t\t\t\t\t\t{el.title}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal__info\">\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Borrow APY:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val\">{globalStats.borrowAPY + '%'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Borrow Limit:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val\">{separateThousands(option.borrowLimit) + ' USDC'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title nowrap\">Loan-To-Value:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val\">\r\n\t\t\t\t\t\t\t{floor((option.borrowLimitUsed / option.intrinsicValue) * 100) + '%'}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Available:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val highlighted\">{separateThousands(floor(available)) + ' USDC'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstep === 2 ?\r\n\t\t\t\t\t\t\t<div className=\"modal__info-field modal__info-field_hl\">\r\n\t\t\t\t\t\t\t\t<div className=\"modal__info-field-title\">Liquidation Price:</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal__info-field-val\">{separateThousands(liqPrice)}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal__form-wrapper\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<Form maxVal={available} inputProps={steps[step].inputProps} btnText={steps[step].title} onSubmit={steps[step].onSubmit}\r\n\t\t\t\t\t\t\tmodalVisible={state.isVisible}\r\n\t\t\t\t\t\t\tbtnIsActive={steps[step].btnIsActive}\r\n\t\t\t\t\t\t\tmaxWarningMsg={'Limit is exceed'}\r\n\t\t\t\t\t\t\tisModal={true}\r\n\t\t\t\t\t\t\tmaxOnClick={setMaxVal}></Form>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"modal__tip\">\r\n\t\t\t\tYou have 30 minutes before the option expires to get your option back. 30 minutes before the expiration date DeDeLend will exercise this option and take 100% of the payoff from the option.\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default BorrowModal;","import { usePages } from './../../../hooks/usePages';\r\n\r\nconst Pagination = ({totalPages, page, changePage}) => {\r\n\treturn usePages(totalPages, page, changePage)\r\n};\r\n\r\nexport default Pagination;","import { useMemo } from 'react';\r\nimport { getPagesArray } from '../components/utils/pages'\r\n\r\nexport const usePages = (totalPages, page, changePage) => {\r\n\tconst pages = useMemo( () => {\r\n\t\tconst pagesArray = getPagesArray(totalPages)\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div className=\"pages-container\">\r\n\t\t\t\t<button className=\"pages-btn-back pages-btn\" disabled={page <= 1}\r\n\t\t\t\t\tonClick={() => changePage(page - 1)}>\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"7\" height=\"12\" viewBox=\"0 0 7 12\" fill=\"none\">\r\n\t\t\t\t\t\t<path d=\"M6 11L1 6L6 1\" stroke=\"#384263\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"pages\">\r\n\t\t\t\t\t{pagesArray.map((p, i) => {\r\n\t\t\t\t\t\treturn <button className={page === p ? 'page current' : 'page'}\r\n\t\t\t\t\t\t\tkey={p}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tchangePage(p)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{p}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button className=\"pages-btn-forward pages-btn\" disabled={page >= totalPages}\r\n\t\t\t\t\tonClick={() => changePage(page + 1)}>\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"7\" height=\"12\" viewBox=\"0 0 7 12\" fill=\"none\">\r\n\t\t\t\t\t\t<path d=\"M1 1L6 6L1 11\" stroke=\"#6988FF\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t)\r\n\t}, [totalPages, page])\r\n\r\n\treturn pages;\r\n}","export const getPageCount = (totalCount, limit) => {\r\n\treturn Math.ceil(totalCount / limit);\r\n}\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n\tconst pagesArr = []\r\n\t\r\n\tfor (let i = 0; i < totalPages; i++) {\r\n\t\tpagesArr.push(i + 1);\r\n\t}\r\n\r\n\treturn pagesArr;\r\n}","import React, {useContext, useState, useEffect} from 'react';\r\nimport Modal from './Modal';\r\nimport { GlobalStatsContext } from './../../../context/context';\r\nimport Form from './../../Form';\r\nimport { USDC_signed } from '../../utils/contracts';\r\nimport Loader from './../loader/Loader';\r\nimport { sepToNumber, separateThousands } from './../../utils/sepThousands';\r\nimport { floor, formatForContract } from './../../utils/math';\r\nimport { errAlert } from './../../utils/error';\r\n\r\n\r\nconst RepayModal = ({state, setVisible, updateOptionStats, isLoading, setIsLoading}) => {\r\n\tconst option = state.option;\r\n\tconst contract_signed = option.contracts?.[1]\r\n\r\n\tconst {globalStats} = useContext(GlobalStatsContext)\r\n\tconst [inputVal, setInputVal] = useState('')\r\n\tconst [step, setStep] = useState(0);\r\n\tconst [liqPrice, setLiqPrice] = useState('')\r\n\r\n\tconst repay = option.realVals?.borrowLimitUsed;\r\n\r\n\tconst setMaxVal = () => {\r\n\t\tsetInputVal(repay)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (typeof option !== 'object' || !Object.keys(option).length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (sepToNumber(inputVal) > repay) {\r\n\t\t\tsetInputVal(repay)\r\n\t\t}\r\n\t\t\r\n\t\tlet classic, result;\r\n\t\tconst prior = option.priorLiqPrice;\r\n\t\tconst val = sepToNumber(inputVal)\r\n\r\n\t\tconst isCALL = option.name.includes('CALL')\r\n\r\n\t\tif (isCALL) {\r\n\t\t\tclassic = option.strike + (((option.borrowLimitUsed - val) / option.amount) * 1.2)\r\n\t\t\t\r\n\t\t\tresult = Math.max(prior, classic);\r\n\t\t} else {\r\n\t\t\tclassic = option.strike - (((option.borrowLimitUsed - val) / option.amount) * 1.2)\r\n\r\n\t\t\tresult = Math.min(prior, classic);\r\n\t\t}\r\n\r\n\t\tif (result === prior && sepToNumber(inputVal) >= repay) {\r\n\t\t\tsetLiqPrice('')\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetLiqPrice(floor(result))\r\n\r\n\t}, [inputVal])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetStep(state.initStep ?? 0)\r\n\t}, [state.initStep])\r\n\t\r\n\r\n\tconst steps = [\r\n\t\t{\r\n\t\t\ttitle: \"Repay\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\tsetIsLoading(true);\r\n\t\t\t\tcontract_signed.repay(option.id, formatForContract(inputVal))\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('Repay transaction:', res);\r\n\r\n\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsetInputVal('')\r\n\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\r\n\t\t\t\t\t\tif (err.message.includes('transfer amount exceeds allowance')) {\r\n\t\t\t\t\t\t\tUSDC_signed.approve(contract_signed.address, 10**9 * 1e6)\r\n\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\tcontract_signed.repay(option.id, formatForContract(inputVal))\r\n\t\t\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetInputVal('')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: false,\r\n\t\t\t\tstate: {\r\n\t\t\t\t\tval: inputVal,\r\n\t\t\t\t\tsetVal: setInputVal\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbtnIsActive: false\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Unlock Collateral\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tsetIsLoading(true);\r\n\r\n\t\t\t\tcontract_signed.unlock(option.id)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log('Unlock transaction:', res);\r\n\r\n\t\t\t\t\t\tres.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tupdateOptionStats(option.id, option.isETH, false)\r\n\t\t\t\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t\t\t\t\tsetStep(0)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: true\r\n\t\t\t},\r\n\t\t\tbtnIsActive: true\r\n\t\t}\r\n\t]\r\n\r\n\tconst resetModal = () => {\r\n\t\tsetStep(state.initStep ?? 0)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Modal className={'modal_borrow'} visible={state.isVisible} setVisible={setVisible} resetModal={resetModal}>\r\n\t\t\t<h1 className='modal__title'>Repay USDC</h1>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t<div className=\"modal__steps steps\">\r\n\t\t\t\t\t{steps.map((el, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className={i === step ? 'modal__step step current' : 'modal__step step'} key={i}>\r\n\t\t\t\t\t\t\t\t{el.title}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal__info\">\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Borrow APY:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val\">{globalStats.borrowAPY + '%'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Borrow Limit:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val\">{separateThousands(option.borrowLimit) + ' USDC'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title nowrap\">Loan-To-Value:</div>\r\n\t\t\t\t\t\t\t<div className=\"modal__info-field-val\">\r\n\t\t\t\t\t\t\t\t{floor((option.borrowLimitUsed / option.intrinsicValue) * 100) + '%'}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"modal__info-field\">\r\n\t\t\t\t\t\t<div className=\"modal__info-field-title\">Repay:</div>\r\n\t\t\t\t\t\t<div className=\"modal__info-field-val highlighted\">{separateThousands(option.borrowLimitUsed) + ' USDC'}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstep === 0 ?\r\n\t\t\t\t\t\t\t<div className=\"modal__info-field modal__info-field_hl\">\r\n\t\t\t\t\t\t\t\t<div className=\"modal__info-field-title\">Liquidation Price:</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal__info-field-val\">{separateThousands(liqPrice)}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal__form-wrapper\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<Form maxVal={repay} inputProps={steps[step].inputProps} btnText={steps[step].title} onSubmit={steps[step].onSubmit}\r\n\t\t\t\t\t\t\tisStep={step < steps.length - 1}\r\n\t\t\t\t\t\t\tmodalVisible={state.isVisible}\r\n\t\t\t\t\t\t\tbtnIsActive={steps[step].btnIsActive}\r\n\t\t\t\t\t\t\tmaxWarningMsg={'Amount is too big'}\r\n\t\t\t\t\t\t\tisModal={true}\r\n\t\t\t\t\t\t\tmaxOnClick={setMaxVal}></Form>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RepayModal;","import React, { useState } from 'react';\r\nimport Button from './UI/button/Button';\r\nimport { OptManager } from './utils/contracts';\r\nimport { separateThousands } from './utils/sepThousands';\r\n\r\nconst OptionItem = ({ option, stats, ...props }) => {\r\n\tconst [initBorrowStep, setInitBorrowStep] = useState(0)\r\n\tconst [initRepayStep, setInitRepayStep] = useState(0)\r\n\tconst [repayDisabled, setRepayDisabled] = useState(true);\r\n\r\n\tconst contract = option.contracts?.[0]\r\n\t\r\n\r\n\tif (typeof option === 'string') {\r\n\t\treturn(\r\n\t\t\t<div className='borrow-market__warning'>\r\n\t\t\t\t{option}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tOptManager.isApprovedOrOwner(contract.address, option.id)\r\n\t\t.then(res => {\r\n\t\t\tif (res === true) {\r\n\t\t\t\tOptManager.ownerOf(option.id)\r\n\t\t\t\t\t.then(owner => {\r\n\t\t\t\t\t\tif (owner == contract.address) {\r\n\t\t\t\t\t\t\tsetInitBorrowStep(2)\r\n\t\t\t\t\t\t\tsetRepayDisabled(false)\r\n\r\n\t\t\t\t\t\t\tif (option.realVals?.borrowLimitUsed <= 0) {\r\n\t\t\t\t\t\t\t\tsetInitRepayStep(1)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetInitRepayStep(0)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetInitBorrowStep(1)\r\n\t\t\t\t\t\t\tsetRepayDisabled(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tsetInitBorrowStep(0)\r\n\t\t\t\tsetInitRepayStep(0)\r\n\t\t\t\tsetRepayDisabled(true)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\r\n\r\n\treturn (\r\n\t\t<div className=\"borrow-market__item _mobile-fluid\" key={option.id}>\r\n\t\t\t<div className=\"borrow-market__item-options\">\r\n\t\t\t\t{\r\n\t\t\t\t\tObject.keys(option).map((key, i) => {\r\n\t\t\t\t\t\tconst stat = stats[i] ?? '';\r\n\t\t\t\t\t\tif (!stat) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet val = '';\r\n\t\t\t\t\t\tif (typeof stat.unit !== 'function') {\r\n\t\t\t\t\t\t\tif (option[key] !== '') {\r\n\t\t\t\t\t\t\t\tlet convertedNum;\r\n\t\t\t\t\t\t\t\tif (stat.name === 'ID' || stat.name === 'Option') {\r\n\t\t\t\t\t\t\t\t\tconvertedNum = option[key]\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconvertedNum = separateThousands(option[key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tval = stat.unit === '$' ? stat.unit + convertedNum\r\n\t\t\t\t\t\t\t\t: convertedNum + ' ' + stat.unit;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tval = ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tval = stat.unit(option[key])\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<div className=\"borrow-market__item-option\" key={key}>\r\n\t\t\t\t\t\t\t\t<div className=\"borrow-market__item-option-name\">\r\n\t\t\t\t\t\t\t\t\t{stat.name}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"borrow-market__item-option-val\">\r\n\t\t\t\t\t\t\t\t\t{val}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"borrow-market__item-btns btns\">\r\n\t\t\t\t<Button className={'btn_small'} disabled={\r\n\t\t\t\t\t(option.borrowLimit <= 0\r\n\t\t\t\t\t\t|| option.borrowLimitUsed >= option.borrowLimit\r\n\t\t\t\t\t\t|| option.expiration <= 60 * 60 * 1000)\r\n\t\t\t\t} onClick={() => {\r\n\t\t\t\t\tprops.setBorrowModalState({\r\n\t\t\t\t\t\t...props.borrowModalState,\r\n\t\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\t\toption,\r\n\t\t\t\t\t\tinitStep: initBorrowStep\r\n\t\t\t\t\t})\r\n\t\t\t\t}}>Borrow</Button>\r\n\t\t\t\t<Button className={\"btn_small\"} disabled={\r\n\t\t\t\t\trepayDisabled\r\n\t\t\t\t} onClick={() => {\r\n\t\t\t\t\tprops.setRepayModalState({\r\n\t\t\t\t\t\t...props.repayModalState,\r\n\t\t\t\t\t\tisVisible: true,\r\n\t\t\t\t\t\toption,\r\n\t\t\t\t\t\tinitStep: initRepayStep\r\n\t\t\t\t\t})\r\n\t\t\t\t}}>Repay</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OptionItem;","import React from 'react';\r\nimport OptionItem from './OptionItem';\r\nimport Loader from './UI/loader/Loader';\r\n\r\nconst OptionsList = ({ options, setBorrowModalState, borrowModalState, setRepayModalState, repayModalState, ...props }) => {\r\n\t\r\n\tfunction convertMsToDays(ms) {\r\n\t\tconst s = ms / 1000;\r\n\t\tconst h = s / 3600;\r\n\t\tconst dResult = Math.floor(h / 24);\r\n\t\tconst hResult = Math.floor(h % 24);\r\n\r\n\t\treturn `${dResult}d ${hResult}h`\r\n\t}\r\n\t\r\n\t\r\n\tconst optionStats = [\r\n\t\t{\r\n\t\t\tname: 'ID',\r\n\t\t\tunit: ''\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Option',\r\n\t\t\tunit: ''\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Amount',\r\n\t\t\tunit: ''\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Strike',\r\n\t\t\tunit: '$'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Expires In',\r\n\t\t\tunit: convertMsToDays,\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Intrinsic Value',\r\n\t\t\tunit: 'USDC'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Borrow Limit',\r\n\t\t\tunit: 'USDC'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Borrow Limit Used',\r\n\t\t\tunit: 'USDC'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Liq. Price',\r\n\t\t\tunit: '$'\r\n\t\t},\r\n\t]\r\n\t\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{\r\n\t\t\t\toptions.length ?\r\n\t\t\t\t\t<div className={typeof options[0] === 'string' ? \"\" : \"borrow-market__items app-box\"}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toptions.map(option => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<OptionItem\r\n\t\t\t\t\t\t\t\t\t\toption={option}\r\n\t\t\t\t\t\t\t\t\t\tstats={optionStats}\r\n\t\t\t\t\t\t\t\t\t\tsetBorrowModalState={setBorrowModalState}\r\n\t\t\t\t\t\t\t\t\t\tborrowModalState={borrowModalState}\r\n\t\t\t\t\t\t\t\t\t\tsetRepayModalState={setRepayModalState}\r\n\t\t\t\t\t\t\t\t\t\trepayModalState={repayModalState}\r\n\t\t\t\t\t\t\t\t\t\tkey={option.id ?? option}\r\n\t\t\t\t\t\t\t\t\t\tisModalLoading={props.isModalLoading}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\tprops.filter ? \r\n\t\t\t\t\t\t'' : <Loader />\r\n\t\t\t}\r\n\t\t</React.Fragment>\r\n\t\t\r\n\t\t\r\n\t);\r\n};\r\n\r\nexport default OptionsList;","import React, { useState, useEffect, useContext } from 'react';\r\nimport BorrowModal from '../../components/UI/modal/BorrowModal';\r\nimport { useFilter } from './../../hooks/useFilter';\r\nimport { getPageCount } from './../../components/utils/pages';\r\nimport Pagination from './../../components/UI/pagination/Pagination';\r\nimport RepayModal from './../../components/UI/modal/RepayModal';\r\nimport { UserStatsContext } from './../../context/context';\r\nimport { connectWallet } from '../../components/utils/wallet';\r\nimport OptionsList from './../../components/OptionsList';\r\nimport { getOptionStats } from './../../components/utils/stats';\r\n\r\nconst BorrowMarket = ({ walletAddress, setWalletAddress }) => {\r\n\r\n\tconst {userStats, setUserStats} = useContext(UserStatsContext)\r\n\tconst [isModalLoading, setIsModalLoading] = useState(false)\r\n\r\n\tconst updateOptionStats = (id, isETH, updateModalState = true) => {\r\n\t\tgetOptionStats(id, isETH)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst options = userStats.options.slice()\r\n\r\n\t\t\t\tlet optI;\r\n\t\t\t\toptions.find((opt, i) => {\r\n\t\t\t\t\tif (opt.id === id) {\r\n\t\t\t\t\t\toptI = i;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\toptions[optI] = {\r\n\t\t\t\t\t...options[optI],\r\n\t\t\t\t\t...res\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetUserStats({\r\n\t\t\t\t\t...userStats,\r\n\t\t\t\t\toptions\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (updateModalState) {\r\n\t\t\t\t\tsetRepayModalState({\r\n\t\t\t\t\t\t...repayModalState,\r\n\t\t\t\t\t\tinitStep: res.borrowLimitUsed > 0 ? 0 : 1,\r\n\t\t\t\t\t\toption: options[optI]\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetBorrowModalState({\r\n\t\t\t\t\t\t...borrowModalState,\r\n\t\t\t\t\t\toption: options[optI]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsModalLoading(false)\r\n\t\t\t})\r\n\t}\r\n\t\r\n\t// Modal window\r\n\tconst [borrowModalState, setBorrowModalState] = useState({\r\n\t\tisVisible: false,\r\n\t\toption: {},\r\n\t\tinitStep: 0\r\n\t})\r\n\tconst [repayModalState, setRepayModalState] = useState({\r\n\t\tisVisible: false,\r\n\t\toption: {},\r\n\t\tinitStep: 0\r\n\t})\r\n\tconst setBorrowModalVisible = (bool) => {\r\n\t\tsetBorrowModalState({\r\n\t\t\t...borrowModalState,\r\n\t\t\tisVisible: bool\r\n\t\t})\r\n\t}\r\n\tconst setRepayModalVisible = (bool) => {\r\n\t\tsetRepayModalState({\r\n\t\t\t...repayModalState,\r\n\t\t\tisVisible: bool\r\n\t\t})\r\n\t}\r\n\t\r\n\r\n\t// Pagination\r\n\tconst [totalPages, setTotalPages] = useState(0);\r\n\tconst [limit] = useState(10);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst changePage = (page) => {\r\n\t\tsetPage(page);\r\n\t\tfetchOptions(limit, page, filteredOptions);\r\n\t}\r\n\r\n\r\n\t\r\n\tconst [isAuth, setIsAuth] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsAuth(Boolean(walletAddress))\r\n\t}, [walletAddress])\r\n\r\n\tconst fetchOptions = (limit, page, options) => {\r\n\t\tif (!options) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tconst fetchedOptions = []\r\n\t\tconst lowerBound = limit * (page - 1);\r\n\t\tconst upperBound = limit * page >= options.length ?\r\n\t\t\t options.length : limit * page;\r\n\t\t\r\n\t\tfor(let i = lowerBound; i < upperBound; i++) {\r\n\t\t\tconst option = options[i];\r\n\t\t\t\r\n\t\t\tif (option) {\r\n\t\t\t\tfetchedOptions.push(option);\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!fetchedOptions.length) {\r\n\t\t\tif (page !== 1) {\r\n\t\t\t\tchangePage(page - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetOptions(fetchedOptions);\r\n\t\tconst totalCount = options.length;\r\n\t\tsetTotalPages(getPageCount(totalCount, limit))\r\n\t}\r\n\t\r\n\tconst [options, setOptions] = useState([]);\r\n\tconst [filter, setFilter] = useState('');\r\n\t\r\n\tuseEffect(() => {\r\n\t\tfetchOptions(limit, page, filteredOptions)\r\n\t}, [limit, page, filter, userStats.options])\r\n\r\n\tconst filteredOptions = useFilter(userStats.options, filter);\r\n\r\n\treturn (\r\n\t\t<div className='block borrow-market'>\r\n\t\t\t<h1 className='block__title'>Borrow Market</h1>\r\n\r\n\t\t\t<div className=\"borrow-market__items-container\">\r\n\t\t\t\t<div className=\"borrow-market__filter filter\">\r\n\t\t\t\t\t<div className=\"input-container\">\r\n\t\t\t\t\t\t<input type=\"checkbox\"\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\tsetFilter('activeBorrows')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetFilter('')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdisabled={!isAuth || (!options.length && !filter)}\t/>\r\n\t\t\t\t\t\t<label>Show only active borrows</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tisAuth ?\r\n\t\t\t\t\t<OptionsList filter={filter} options={options} setBorrowModalState={setBorrowModalState} borrowModalState={borrowModalState} setRepayModalState={setRepayModalState} repayModalState={repayModalState} isModalLoading={isModalLoading}></OptionsList>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div className='auth-prompt app-box _mobile-fluid'>\r\n\t\t\t\t\t\t<button onClick={() => connectWallet(setWalletAddress)}>Connect wallet</button> to see a list of options\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t{isAuth && userStats.options ?\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<BorrowModal state={borrowModalState} setVisible={setBorrowModalVisible} walletAddress={walletAddress}\r\n\t\t\t\t\tupdateOptionStats={updateOptionStats}\r\n\t\t\t\t\tisLoading={isModalLoading}\r\n\t\t\t\t\tsetIsLoading={setIsModalLoading}></BorrowModal>\r\n\t\t\t\t\t<RepayModal state={repayModalState} setVisible={setRepayModalVisible} walletAddress={walletAddress}\r\n\t\t\t\t\tupdateOptionStats={updateOptionStats}\r\n\t\t\t\t\tisLoading={isModalLoading}\r\n\t\t\t\t\tsetIsLoading={setIsModalLoading}></RepayModal>\r\n\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\ttotalPages={totalPages}\r\n\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\tchangePage={changePage}\r\n\t\t\t\t\t></Pagination>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t\t:\r\n\t\t\t\t\"\"\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BorrowMarket;","import { useMemo } from 'react';\r\n\r\nexport const useFilter = (items = [], filter) => {\r\n\tconst filterItems = (filter) => {\r\n\t\tif (!filter) {\r\n\t\t\treturn items;\r\n\t\t}\r\n\r\n\t\tswitch(filter) {\r\n\t\t\tcase 'activeBorrows':\r\n\t\t\t\treturn items.filter(item => {\r\n\t\t\t\t\treturn Number(item.borrowLimitUsed) !== 0;\r\n\t\t\t\t})\r\n\t\t\tdefault: \r\n\t\t\t\treturn items;\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst filteredItems = useMemo(() => {\r\n\t\treturn filterItems(filter)\r\n\t}, [items, filter])\r\n\r\n\t\r\n\r\n\treturn filteredItems;\r\n}","import React, { useContext, useState, useEffect } from 'react';\r\nimport { UserStatsContext } from './../context/context';\r\nimport Form from './Form';\r\nimport { DDL_POOL, DDL_POOL_signed, USDC_signed } from './utils/contracts';\r\nimport { separateThousands, sepToNumber } from './utils/sepThousands';\r\nimport Loader from './UI/loader/Loader';\r\nimport { getUserStats } from './utils/stats';\r\nimport { formatForContract } from './utils/math';\r\nimport { errAlert } from './utils/error';\r\n\r\nconst SupplyCard = ({ step, setStep, ...props }) => {\r\n\tconst {userStats, setUserStats} = useContext(UserStatsContext)\r\n\tconst [inputVal, setInputVal] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (sepToNumber(inputVal) > userStats.balance) {\r\n\t\t\tsetInputVal(userStats.balance)\r\n\t\t}\r\n\t}, [inputVal])\r\n\t\r\n\r\n\tconst steps = [\r\n\t\t{\r\n\t\t\ttitle: \"Approve\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsetIsLoading(true)\r\n\t\t\t\ttry {\r\n\t\t\t\t\tUSDC_signed.approve(DDL_POOL.address, (10**9 * 1e6).toFixed(0))\r\n\t\t\t\t\t.then(tsc => {\r\n\t\t\t\t\t\tconsole.log('Supply Approve transaction: ', tsc);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttsc.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tsetStep(step + 1)\r\n\t\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: true,\r\n\t\t\t},\r\n\t\t\tbtnIsActive: true\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Supply\",\r\n\t\t\tonSubmit: (e) => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tsetIsLoading(true)\r\n\t\t\t\ttry {\r\n\t\t\t\t\tDDL_POOL_signed.provideFrom(props.walletAddress, formatForContract(inputVal), 0)\r\n\t\t\t\t\t.then(tsc => {\r\n\t\t\t\t\t\tconsole.log('Supply transaction:', tsc);\r\n\r\n\t\t\t\t\t\ttsc.wait()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tgetUserStats(props.walletAddress)\r\n\t\t\t\t\t\t\t\t\t.then(stats => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserStats({\r\n\t\t\t\t\t\t\t\t\t\t\t...userStats,\r\n\t\t\t\t\t\t\t\t\t\t\t...stats\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tsetInputVal('')\r\n\t\t\t\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr => {\r\n\t\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\terrAlert(err)\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tinputProps: {\r\n\t\t\t\tplaceholder: 'Amount',\r\n\t\t\t\tdisabled: false,\r\n\t\t\t\tstate: {\r\n\t\t\t\t\tval: inputVal,\r\n\t\t\t\t\tsetVal: setInputVal\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\t\r\n\treturn (\r\n\t\t<div className={\"supply-card market-card app-box \" + props.className}>\r\n\t\t\t<h2>Supply USDC</h2>\r\n\t\t\t<div className=\"steps\">\r\n\t\t\t\t{steps.map((el, i) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={i === step ? 'step current' : 'step'} key={i}>\r\n\t\t\t\t\t\t\t{el.title}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Form className=\"market-card__form\" maxVal={userStats.balance} inputProps={steps[step].inputProps} btnText={steps[step].title} onSubmit={steps[step].onSubmit}\r\n\t\t\t\t\tisStep={step < steps.length - 1}\r\n\t\t\t\t\tbtnIsActive={steps[step].btnIsActive}\r\n\t\t\t\t\tbtnIsDisabled={userStats.balance <= 0 || userStats.balance === undefined || props.walletAddress === ''}></Form>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t<div className=\"market-card__info\">\r\n\t\t\t\t<div className=\"info-field\">\r\n\t\t\t\t\t<div className=\"info-field__name\">Balance: </div>\r\n\t\t\t\t\t<div className={\"info-field__val\" + (userStats.balance !== undefined ? '' : ' no-data')}>{userStats.balance !== undefined ? (separateThousands(userStats.balance) + ' USDC') : ''}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SupplyCard;","import React, {useContext, useEffect, useState} from 'react';\r\nimport { separateThousands, sepToNumber } from './utils/sepThousands';\r\nimport { UserStatsContext } from './../context/context';\r\nimport Form from './Form';\r\nimport { DDL_POOL_signed } from './utils/contracts';\r\nimport Loader from './UI/loader/Loader';\r\nimport { getUserStats } from './utils/stats';\r\nimport { formatForContract } from './utils/math';\r\nimport { errAlert } from './utils/error';\r\n\r\nconst WithdrawCard = (props) => {\r\n\tconst {userStats, setUserStats} = useContext(UserStatsContext)\r\n\tconst [inputVal, setInputVal] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\t\r\n\tconst inputProps = {\r\n\t\tplaceholder: 'Amount',\r\n\t\tdisabled: props.walletAddress === '',\r\n\t\tstate: {\r\n\t\t\tval: inputVal,\r\n\t\t\tsetVal: setInputVal\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (sepToNumber(inputVal) > userStats.avail) {\r\n\t\t\tsetInputVal(userStats.avail)\r\n\t\t}\r\n\t}, [inputVal])\r\n\r\n\tconst onSubmit = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetIsLoading(true)\r\n\t\t\r\n\t\ttry {\r\n\t\t\tDDL_POOL_signed.withdraw(formatForContract(inputVal))\r\n\t\t\t.then(tsc => {\r\n\t\t\t\tconsole.log('Withdraw transaction:', tsc);\r\n\r\n\t\t\t\ttsc.wait()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tgetUserStats(props.walletAddress)\r\n\t\t\t\t\t\t\t.then(stats => {\r\n\t\t\t\t\t\t\t\tsetUserStats({\r\n\t\t\t\t\t\t\t\t\t...userStats,\r\n\t\t\t\t\t\t\t\t\t...stats\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetInputVal('')\r\n\t\t\t\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\terr => {\r\n\t\t\t\terrAlert(err)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t\t} catch(err) {\r\n\t\t\terrAlert(err)\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className={\"withdraw-card market-card app-box \" + props.className}>\r\n\t\t\t<h2>Withdraw USDC</h2>\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Form className=\"market-card__form\" maxVal={userStats.avail} btnText={\"Withdraw\"} onSubmit={onSubmit} inputProps={inputProps} btnIsDisabled={userStats.avail <= 0 || userStats.avail === undefined || props.walletAddress === '' }></Form>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t<div className=\"market-card__info\">\r\n\t\t\t\t<div className=\"info-field\">\r\n\t\t\t\t\t<div className=\"info-field__name\">Current Balance: </div>\r\n\t\t\t\t\t<div className={\"info-field__val\" + (userStats.curBalance !== undefined ? '' : ' no-data')}>{userStats.curBalance !== undefined ? (separateThousands(userStats.curBalance) + ' USDC') : ''}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"info-field\">\r\n\t\t\t\t\t<div className=\"info-field__name\">Available: </div>\r\n\t\t\t\t\t<div className={\"info-field__val\" + (userStats.balance !== undefined ? '' : ' no-data')}>{userStats.avail !== undefined ? (separateThousands(userStats.avail) + ' USDC') : ''}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default WithdrawCard;","import SupplyCard from './../../components/SupplyCard';\r\nimport WithdrawCard from './../../components/WithdrawCard';\r\n\r\nconst SupplyMarket = ({ walletAddress, supplyStep, setSupplyStep }) => {\r\n\t\r\n\t\r\n\treturn (\r\n\t\t<div className='block supply-market'>\r\n\t\t\t<h1 className='block__title'>Supply Market</h1>\r\n\t\t\t<div className=\"supply-market__functions\">\r\n\t\t\t\t<SupplyCard walletAddress={walletAddress} className=\"supply-market__function\" step={supplyStep} setStep={setSupplyStep}></SupplyCard>\r\n\t\t\t\t<WithdrawCard walletAddress={walletAddress} className=\"supply-market__function\" setSupplyStep={setSupplyStep}></WithdrawCard>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SupplyMarket;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Tabs = ({className, links}) => {\r\n\tconst cls = [className, 'tabs']\r\n\t\r\n\treturn (\r\n\t\t<div className={cls.join(' ')}>\r\n\t\t\t{links.map((link) => {\r\n\t\t\t\tconst linkCls = ['btn', 'btn_tab', link.isActive ? 'active' : '']\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Link to={link.to} className={linkCls.join(' ')} key={link.to}>{link.name}</Link>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Tabs;","import React, { useContext } from 'react';\r\nimport { GlobalStatsContext, UserStatsContext } from './../context/context';\r\nimport { separateThousands } from './utils/sepThousands';\r\n\r\n\r\nconst MarketInfoBoard = () => {\r\n\tconst {globalStats} = useContext(GlobalStatsContext)\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"info-board app-box block _mobile-fluid\">\r\n\t\t\t<div className=\"info-board__items\">\r\n\t\t\t\t<div className=\"info-board__item\">\r\n\t\t\t\t\t<div className=\"info-board__item-title\">Total Supplied</div>\r\n\t\t\t\t\t<div className=\"info-board__item-val\">{separateThousands(globalStats.totalSupplied, ',') + ' USDC'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"info-board__item\">\r\n\t\t\t\t\t<div className=\"info-board__item-title\">Total Borrowed</div>\r\n\t\t\t\t\t<div className=\"info-board__item-val\">{separateThousands(globalStats.totalBorrowed, ',') + ' USDC'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"info-board__item\">\r\n\t\t\t\t\t<div className=\"info-board__item-title\">Utilization Rate</div>\r\n\t\t\t\t\t<div className=\"info-board__item-val\">{separateThousands(globalStats.utilRate, ',') + '%'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"info-board__item\">\r\n\t\t\t\t\t<div className=\"info-board__item-title\">Available to Borrow</div>\r\n\t\t\t\t\t<div className=\"info-board__item-val\">{separateThousands(globalStats.availToBorrow, ',') + ' USDC'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"info-board__item\">\r\n\t\t\t\t\t<div className=\"info-board__item-title\">Supply APY</div>\r\n\t\t\t\t\t<div className=\"info-board__item-val\">{separateThousands(globalStats.borrowAPY, ',') + '%'}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MarketInfoBoard;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Routes, Route,\tuseLocation, useNavigate } from \"react-router-dom\";\r\nimport BorrowMarket from './../views/markets/BorrowMarket';\r\nimport SupplyMarket from './../views/markets/SupplyMarket';\r\nimport Tabs from './Tabs';\r\nimport MarketInfoBoard from './MarketInfoBoard';\r\nimport { DDL_POOL, USDC } from './utils/contracts';\r\nimport { UserStatsContext } from '../context/context';\r\nimport { ethers } from 'ethers';\r\n\r\n\r\nconst MarketRouter = ({ walletAddress, setWalletAddress}) => {\r\n\tconst loc = useLocation();\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loc.pathname === '/' || loc.pathname === \"/app.html\") {\r\n\t\t\tnavigate('/borrow-market')\r\n\t\t}\r\n\t}, [loc.pathname])\r\n\t\r\n\tconst links = [\r\n\t\t{\r\n\t\t\tname: 'Borrow Market',\r\n\t\t\tto: '/borrow-market',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Supply Market',\r\n\t\t\tto: '/supply-market',\r\n\t\t},\r\n\t]\r\n\tlinks.find(link => {\r\n\t\tlink.isActive = loc.pathname === link.to;\r\n\t\treturn link.isActive;\r\n\t})\r\n\r\n\r\n\t// Supply Market state\r\n\tconst {userStats} = useContext(UserStatsContext)\r\n\tconst [supplyStep, setSupplyStep] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (walletAddress) {\r\n\t\t\tUSDC.allowance(walletAddress, DDL_POOL.address)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (Number(ethers.utils.formatUnits(res, 6)) >= userStats.balance) {\r\n\t\t\t\t\t\tsetSupplyStep(1)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetSupplyStep(0)\r\n\t\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [userStats.balance, walletAddress])\r\n\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Tabs className='market-tabs' links={links}></Tabs>\r\n\t\t\t<MarketInfoBoard></MarketInfoBoard>\r\n\t\t\t<Routes>\r\n\t\t\t\t<Route path=\"/borrow-market\" element={<BorrowMarket walletAddress={walletAddress} setWalletAddress={setWalletAddress} />}></Route>\r\n\t\t\t\t<Route path=\"/supply-market\" element={<SupplyMarket walletAddress={walletAddress} setWalletAddress={setWalletAddress} supplyStep={supplyStep} setSupplyStep={setSupplyStep} />}></Route>\r\n\t\t\t</Routes>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default MarketRouter;","import React from 'react';\r\n\r\nconst Warning = (props) => {\r\n\treturn (\r\n\t\t<div className=\"warning\">\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Warning;","// Style\r\nimport './style/App.scss'\r\n\r\n// Main\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport MarketRouter from './components/MarketRouter';\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { UserStatsContext } from './context/context';\r\nimport { GlobalStatsContext } from './context/context';\r\nimport Warning from './components/UI/warning/Warning';\r\nimport Favicon from 'react-favicon';\r\n\r\n\r\n\r\nfunction App() {\r\n\tconst [walletAddress, setWalletAddress] = useState('')\r\n\t\r\n\tconst [userStats, setUserStats] = useState({\r\n\t\tbalance: undefined,\r\n\t\tcurBalance: undefined,\r\n\t\tavail: undefined\r\n\t})\r\n\tconst [globalStats, setGlobalStats] = useState(\r\n\t\t{\r\n\t\t\ttotalSupplied: \"\",\r\n\t\t\ttotalBorrowed: \"\",\r\n\t\t\tutilRate: \"\",\r\n\t\t\tavailToBorrow: \"\",\r\n\t\t\tborrowAPY: \"\",\r\n\t\t}\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Favicon url=\"https://i.imgur.com/dLCWse0.png\" />\r\n\t\t\t\r\n\t\t\t<GlobalStatsContext.Provider value={{\r\n\t\t\t\tglobalStats,\r\n\t\t\t\tsetGlobalStats\r\n\t\t\t}}>\r\n\t\t\t\t<UserStatsContext.Provider value={{\r\n\t\t\t\t\tuserStats,\r\n\t\t\t\t\tsetUserStats\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t\t<Header walletAddress={walletAddress}\r\n\t\t\t\t\t\t\tsetWalletAddress={setWalletAddress}\r\n\t\t\t\t\t\t></Header>\r\n\r\n\t\t\t\t\t\t<main className='_container'>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<HashRouter>\r\n\t\t\t\t\t\t\t\t<MarketRouter walletAddress={walletAddress}\r\n\t\t\t\t\t\t\tsetWalletAddress={setWalletAddress}></MarketRouter>\r\n\t\t\t\t\t\t\t</HashRouter>\r\n\t\t\t\t\t\t</main>\r\n\r\n\t\t\t\t\t\t<Footer></Footer>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</UserStatsContext.Provider>\r\n\t\t\t</GlobalStatsContext.Provider>\r\n\t\t\t<Warning>\r\n\t\t\t\tDeDeLend is in beta. Use at your own risk\r\n\t\t\t</Warning>\r\n\t\t</React.Fragment>\r\n\t\t\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>\r\n);\r\n"],"sourceRoot":""}